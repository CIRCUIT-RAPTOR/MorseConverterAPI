<!DOCTYPE html>
<html>
<head>
    <title>Morse Converter App</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; line-height: 1.6; }
        textarea { width: 100%; height: 100px; margin-bottom: 10px; padding: 10px; }
        .box { border: 1px solid #ccc; padding: 20px; border-radius: 8px; background: #f9f9f9; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px; }
        #error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <div class="box">
        <h2>Morse Code Converter</h2>
        <p>Enter Text to Encode or Morse to Decode:</p>
        <textarea id="inputField" placeholder="Type here..."></textarea>
        <button onclick="convert('encode')">Text to Morse</button>
        <button onclick="convert('decode')">Morse to Text</button>
        <p id="error"></p>
        <h3>Result:</h3>
        <div id="result" style="word-break: break-all; font-family: monospace; background: #eee; padding: 10px;"></div>
    </div>

    <script>
        async function convert(type) {
            const input = document.getElementById('inputField').value;
            const errorElement = document.getElementById('error');
            const resultElement = document.getElementById('result');
            errorElement.innerText = "";
            
            const param = type === 'encode' ? 'text' : 'morse';
            const response = await fetch(`/${type}?${param}=${encodeURIComponent(input)}`);
            const data = await response.json();

            if (response.ok) {
                resultElement.innerText = data.output;
            } else {
                resultElement.innerText = "";
                errorElement.innerText = data.detail;
            }
        }
    </script>
</body>
</html>